# Домашнее задание к занятию "08.02 Работа с Playbook"

С помощью playbook можно установить Clickhouse и vector на хосты под управлением операционной системы Centos.  
Playbook запускается командой  
`ansible-playbook site.yml -i inventory/prod.yml`  
Файл prod.yml содержит группу хостов на которую будет проводится установка. Переменные находятся в каталогах group_vars. Шаблон jinja лежит в каталоге templates.  
Первая часть плейбука состоит из установки clickhouse, которую мы достаточно подробно разобрали на лекции, поэтому описывать ее смысла нет.  
Во второй части плейбука устанавливается vector. Сначала для него с помощью модуля file создается каталог установки с нужными правами. Кстати эту часть можно перенести в pre-tasks или вынести в отдельную роль, как дойдет дело до ролей.  
Затем скачивается дистрибутив с помощью модуля get_url. Этот способ установки показался мне самым правильным из всех возможных. Затем с помощью модуля yum проходит установка vector.  
Конфигурирование происходит с помощью модуля template. Готовый конфиг (примерный и скачанный с оф сайта vector) копируется в каталог templates с расширением .j2. Таким образом можно шаблонизировать файлы конфигураций и многое другое. Этим способом в будущем можно будет шаблонизировать unit-файл для запуска vector при старте системы, например.   


---